<h1>组件</h1>

一个`Vue`组件在使用前需要先被“注册”，这样`Vue`才能在渲染模板时找到其对应的实现;组件注册有两种方式:**全局注册**、**局部注册**

## 1、组件注册


### 1-1、局部注册
在Vue中，局部注册组件意味着你只在当前组件的范围内注册该组件，而不是在整个Vue应用中全局注册。这样做的好处是可以减少全局命名空间的污染，并且只有当该组件被实际使用时，它才会被加载和解析，这有助于优化应用的性能。

**局部注册不改变`main.js内容`**

<hr/>

**在`components`创建`Logo.vue`**

```vue
<script setup>
import {ref} from "vue";

let admain=ref('ad') // 账号
let passowd=ref('123') // 密码
</script>

<template>
    账号：<input type="text" v-model="admain">
    密码：<input type="text" v-model="passowd">
  <br><br>
  <button>登陆</button>
</template>

<style scoped>

</style>


<!--  都是相同的
<template>
    账号：<input type="text" v-model="admin">
    密码：<input type="text" v-model="password">
  <br><br>
  <button>登陆</button>
</template>

<script>
export default {
  data() {
    return {
      admin: '', // 账号
      password: '' // 密码
    };
  }
};
</script>

<style scoped>
/* 您的样式代码 */
</style>

-->

```
<hr/>

**在`App.vue`使用注册组件**

```vue
<template>
  <!-- 使用局部注册的Logoin组件 -->
  <Logo/>
</template>

<script>
// 局部注册Logoin组件
import LoginComponent from './components/Login.vue';

export default {
  // 在components选项中局部注册Logoin组件
  components: {
    'Logo': LoginComponent
  }
}
</script>

<style scoped>
/* 您的样式代码 */
</style>
```
**在`App.vue`使用`<script setup>`只要引入组件就行**

```vue
<template>
  <!-- 使用局部注册的Logoin组件 -->
  <LoginComponent/>
</template>

<script setup>
// 局部注册Logoin组件
import LoginComponent from './components/Login.vue';

</script>

<style scoped>
/* 您的样式代码 */
</style>
```
![image-2025](/public/assets/vue3/22.png)

### 1-2、全局注册
可使用`app.component(name，Component)`注册组件的方法，在此应用的任意组件的模板中使用
- `name`:注册的名字
- `Component`:需要注册的组件

<hr/>

> 在`components`创建`Login.vue`

**全局注册是在`main.js`**


```js
// 没有改变时

import './assets/main.css'

import { createApp } from 'vue'
import App from './App.vue'

createApp(App).mount('#app')

```

```js
// 添加组件

import './assets/main.css'

import { createApp } from 'vue'
import App from './App.vue'

// 导入 logo 组件
import LoginComponent  from './components/Login.vue'

// 创建 Vue 应用实例
const app = createApp(App);

// 全局注册 logo 组件
app.component('Logo', LoginComponent );

// 挂载 Vue 应用到 #app DOM 元素上
app.mount('#app');

```
<hr/>

**在`components`创建`Logo.vue`**
<br/>
两种写法那种都可以
```vue
<script setup>
import {ref} from "vue";

let admain=ref('ad') // 账号
let passowd=ref('123') // 密码
</script>

<template>
    账号：<input type="text" v-model="admain">
    密码：<input type="text" v-model="passowd">
  <br><br>
  <button>登陆</button>
</template>

<style scoped>

</style>


<!--  都是相同的
<template>
    账号：<input type="text" v-model="admin">
    密码：<input type="text" v-model="password">
  <br><br>
  <button>登陆</button>
</template>

<script>
export default {
  data() {
    return {
      admin: '', // 账号
      password: '' // 密码
    };
  }
};
</script>

<style scoped>
/* 您的样式代码 */
</style>

-->

```
<hr/>

**在`App.vue`使用注册组件**

![image-2025](/public/assets/vue3/23.png)

```vue  
<template>
<!--    使用注册组件-->
    <Logo/>
</template>

<script>

</script>

<style scoped>
/* 您的样式代码 */
</style>
```
![image-2025](/public/assets/vue3/22.png)


## 2、父传子组件-字符串数组声明props

- 父组件向子组件传递数据，需要在子组件声明`props` 用来接收传递数据的值
- 组件中`props`中的数据是只读的，不可直接更改，只能通过父组件进行更改

**父组件**：App.vue

```vue
<template>
  <LoginComponent :title="title" :arr="arr"/>
</template>

<script>
// 导入 LoginComponent 组件
import LoginComponent from './components/Login.vue';

export default {
  components: {
    LoginComponent // 注册组件
  },
  data() {
    return {
      title: '传递字符串', // 使用 data 函数返回对象来定义响应式数据
      arr: ["zhangsan", "lisi", "wangwu"] // 直接定义数组
    };
  }
};
</script>

<style scoped>
/* 你的样式代码 */
</style>
```
**子组件**：Login.vue
```vue
<template>
  <!-- <h2>Props 组件交互</h2> -->
  <p>{{ title }}</p> <!-- 直接使用 props 中的 title -->
  <!-- 如果需要遍历数组，可以这样写 -->
  <p v-for="(item, index) in arr" :key="index">{{ item }}</p>
</template>

<script>
export default {
  props: {
    title: {
      type: String,
      default: ""
    },
    arr: {
      type: Array,
      default: () => [] // 返回一个空数组作为默认值
    }
  }
};
</script>

<style scoped>
/* 你的样式代码 */
</style>
```

![image-2025](/public/assets/vue3/24.png)

## 3、子传父组件-自定义事件组件交互

- 子组件向父组件传递数据，自定义事件可以在组件中反向传递数据

**子组件**：Login.vue

```vue
<template>
  <h2>自定义事件组件交互</h2>
  <input type="button" value="发送数据" @click="sendData">
</template>

<script>
export default {
  name: "LoginComponent", // 为组件添加名称
  methods: {
    sendData() {
      // 触发名为 'onEvent' 的自定义事件，并传递数据对象
      this.$emit("onEvent", { name: "张三", age: 18 });
    }
  }
};
</script>

<style scoped>
/* 你的样式代码 */
</style>
```

**父组件**：App.vue

```vue
<template>
  <h2>APP.vue的二级标题</h2>
  <LoginComponent  @onEvent="getData"/>
</template>

<script>
// 导入 LoginComponent 组件
import LoginComponent from './components/Login.vue';

export default {
  components: {
    LoginComponent // 注册组件
  },
  methods: {
    getData(student) {
      alert("姓名：" + student.name + "，年龄：" + student.age);
    }
  }
};
</script>

<style scoped>
/* 你的样式代码 */
</style>
```

![image-2025](/public/assets/vue3/25.png)


## 组件案例
<!-- 
https://www.bilibili.com/video/BV1fN4y1w7CJ?spm_id_from=333.788.videopod.episodes&vd_source=167d29b7ed205825b68bf75bc9ea57c2&p=58
 -->

## 4、组件–透传属性和事件
## 组件-阻止自动透传属性和事件

## 组件-多根元素的透传属性和事件
## 组件-访问透传的属性和事件
## 组件–插槽
## 组件–具名插槽
## 组件–作用域插槽
## 组件– style scoped-组件中css作用域
## 组件– style scoped -深度选择器
## 组件- CSS中的v-bind函数
## 组件–依赖注入–提供数据
## 组件–依赖注入–注入数据
## 组件–生命周期

